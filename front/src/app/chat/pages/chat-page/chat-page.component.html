<div class="main">
  <div class="menuContainer">
    <app-menu></app-menu>
    <div>
      <button class="btn-submitLeft" (click)="inicio()">Inicio</button>
    </div>
    <div>
      <button class="btn-submit" (click)="toggleSidebar()">Mi perfil</button>
    </div>
    <div class="sidebar-container" [ngClass]="{'sidebar-open': isSidebarOpen}">
      <div class="sidebar">
        
        <button class="close-btn" (click)="closeSidebar()">&#9664;</button>
        <div class="user-info">
          <p>{{ username }}</p>
          <img [src]="userPhoto" alt="User Photo" class="user-photo">
          <button *ngIf="esInvitado()" class="saldo-btn" (click)="irRecargar()"> Mi Saldo </button>
          <button class="logout-btn" (click)="logout()">Cerrar sesi√≥n</button>
        </div>
      </div>
    </div>
  </div>

  <div class="videoContainer">
    <app-video-player></app-video-player>
  </div>

  <div *ngIf="!esInvitado()" class="live-admin">
    <button class="live-status" (click)="openPopup()">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);transform: ;msFilter:;">
        <path d="M7.5 6.5C7.5 8.981 9.519 11 12 11s4.5-2.019 4.5-4.5S14.481 2 12 2 7.5 4.019 7.5 6.5zM20 21h1v-1c0-3.859-3.141-7-7-7h-4c-3.86 0-7 3.141-7 7v1h17z"></path>
      </svg>
      <span>{{ connectedUsers }}</span>
    </button>
    <button *ngIf="esAdmin()" (click)="toggleBooleanState()">{{textButton}}</button>
  </div>

 
  <div *ngIf="!esInvitado()" class="chat-container">
    <app-users-chat></app-users-chat>
    <div class="input-container">
      <app-users-type></app-users-type>
    </div>
  </div>

  <!-- Pop-up -->
  <div *ngIf="isPopupOpen" class="popup-overlay">
    <div class="popup">
      <button class="close-button" (click)="closePopup()">&#10005;</button>
      <div class="popup-content">
        <h3>Usuarios Conectados</h3>
        <div class="user-list">
          <div *ngFor="let user of users" class="user-item">
            <img [src]="getUserPhoto(user.name)" alt="User Photo" class="user-photo">
            <p>{{ user.name }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
